<!DOCTYPE html>
<html>
<head>
  <title>SignalFlow EEG Dataset Portal</title>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="public/styles.css">
</head>
<body>
  <div class="container">
    <h1>SignalFlow EEG Analysis Portal</h1>
    <div class="tabs">
      <button class="tablinks" onclick="openTab(event, 'Upload')">Upload EEG Data</button>
      <button class="tablinks" onclick="openTab(event, 'Manage')">Manage EEG Datasets</button>
    </div>
    <div id="Upload" class="tabcontent">
      <form id="uploadForm">
        <div class="form-group">
          <label for="datasetOption">Choose Dataset Action:</label>
          <select id="datasetOption" name="datasetOption" onchange="datasetOptionChanged(this)">
            <option value="new" selected>Create New Dataset</option>
            <option value="merge">Merge with an Existing Dataset</option>
          </select>
        </div>
        <div class="form-group" id="datasetNameGroup">
          <label for="datasetName">New Dataset Name:</label>
          <input type="text" id="datasetName" name="datasetName" placeholder="Enter new dataset name">
          <input type="hidden" id="datasetId" name="datasetId" value="">
        </div>
        <div class="form-group" id="datasetMergeGroup" style="display:none;">
          <label for="existingDatasets">Select an Existing Dataset to Merge:</label>
          <select id="existingDatasets" name="existingDatasets">
          </select>
        </div>

        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
      

        <div class="form-group">
        <label for="eegDataType">Select EEG Data Format:</label>
        <select id="eegDataType">
          <option value="option1" data-description="Description for Option 1">Option 1</option>
        </select>

        <script>
        $(document).ready(function() {
          $('#eegDataType').select2({
            templateResult: function(option) {
              if (!option.id) {
                return option.text;
              }
              var description = $(option.element).data('description');
              return $('<div><strong>' + option.text + '</strong><br><small>' + description + '</small></div>');
            },
            templateSelection: function(option) {
              return option.text;
            }
          });
        });
        </script>
        </div>

        <div class="form-group">
          <label for="email">Your Email Address:</label>
          <input type="email" id="email" name="email" placeholder="Enter your email address" value="user@example.com">
        </div>
        <div class="form-group">
          <label>Dataset Files Upload:</label>
          <div id="app"></div>
        </div>
        <div style="display: flex; justify-content: flex-end; margin-top: 10px;">
          <button type="submit" class="btn" style="font-size: 0.8rem; margin-right: 10px;">Start Upload</button>
          <button type="reset" class="btn" style="background-color:red; font-size: 0.8rem;">Reset Form</button>
        </div>

      </form>
    </div>

    <div id="Manage" class="tabcontent">
      <h2>Dataset Organization and Management</h2>
      <div class="dataset-actions" style="display: flex; justify-content: flex-end; margin-top: 10px;">
        <button class="btn" style="font-size: 0.8rem; margin-right: 10px;" onclick="createDataset()">Create Dataset</button>
        <button class="btn" style="font-size: 0.8rem; margin-right: 10px;" onclick="deleteDataset()">Delete Dataset</button>
        <button class="btn" style="font-size: 0.8rem;" onclick="downloadDataset()">Download Dataset</button>
      </div>
      <div class="dataset-table-container">
        <table class="dataset-table">
          <thead>
            <tr>
              <th>Dataset Name</th>
              <th>File Count</th>
              <th>Total Size</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="dataset-table-body">
            <!-- Dataset records will be dynamically inserted here -->
          </tbody>
        </table>
      </div>

    </div>


    <script>
      function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
      }

      function datasetOptionChanged(selectObj) {
        var value = selectObj.value;
        if (value == 'new') {
          document.getElementById('datasetNameGroup').style.display = 'block';
          document.getElementById('datasetMergeGroup').style.display = 'none';
        } else if (value == 'merge') {
          document.getElementById('datasetNameGroup').style.display = 'none';
          document.getElementById('datasetMergeGroup').style.display = 'block';
        }
      }

      document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('datasetName').value = 'Dataset_' + Date.now();
        // Automatically open the Upload tab on page load
        document.getElementsByClassName('tablinks')[0].click();
      });
    </script>
    <script src="src/index.js"></script>
  </div>
</body>
</html>

